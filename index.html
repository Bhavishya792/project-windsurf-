<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoRise - Sustainable Living</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Distressed&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav>
        <div class="nav-left">
            <img src="assets/logo.png" alt="EcoRise Logo" class="logo">
            <span class="brand-name">EcoRise</span>
        </div>
        <div class="nav-middle">
            <a href="index.html" class="active">Home</a>
            <a href="fiy.html">FIY</a>
            <a href="#">Volunteer</a>
            <a href="#">Guide</a>
            <a href="#" class="accessibility-link">Accessibility Info</a>
        </div>
        <div class="nav-right">
            <button class="icon-btn" id="calendarBtn">
                <i class="fas fa-calendar"></i>
            </button>
            <button class="icon-btn" id="notificationBtn">
                <i class="fas fa-bell"></i>
            </button>
            <button class="profile-btn">
                <img src="assets/default-profile.png" alt="Profile" class="profile-pic">
            </button>
        </div>
    </nav>

    <main>
        <section class="hero">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1>Take care of nature</h1>
                <div class="hero-subtext">
                    <h2>Join the Green Revolution</h2>
                    <p>Every small action counts towards a sustainable future</p>
                </div>
                <button class="cta-button" onclick="scrollToMap()">Get Started</button>
            </div>
        </section>

        <button class="floating-camera-btn" id="cameraBtn">
            <i class="fas fa-camera"></i>
        </button>

        <section class="tips-section">
            <h2>We are Creating sustainable society, for everyone and forever.</h2>
            <div class="tips-track">
                <div class="tips-container">
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/sorting.jpg" alt="Sort Your Recyclables">
                        <div class="card-content">
                            <h3>Sort Your Recyclables</h3>
                            <p>Separate recyclable materials into categories like paper, plastic, and glass for efficient recycling.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/compost food scraps.jpg" alt="Compost Food Scraps">
                        <div class="card-content">
                            <h3>Compost Food Scraps</h3>
                            <p>Compost food scraps like vegetable peels and coffee grounds to reduce landfill waste.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/clean your recycleables.jpg" alt="Clean Your Recyclables">
                        <div class="card-content">
                            <h3>Clean Your Recyclables</h3>
                            <p>Clean recyclables like bottles and jars before placing them in the recycling bin to prevent contamination.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/use beeswax wrap.jpg" alt="Use Beeswax Wraps">
                        <div class="card-content">
                            <h3>Use Beeswax Wraps</h3>
                            <p>Switch to reusable beeswax wraps instead of plastic wrap for food storage.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/recycle old documents.jpg" alt="Recycle Old Documents">
                        <div class="card-content">
                            <h3>Recycle Old Documents</h3>
                            <p>Shred and recycle old documents instead of discarding them in the trash.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/choose recycled products.jpg" alt="Choose Recycled Products">
                        <div class="card-content">
                            <h3>Choose Recycled Products</h3>
                            <p>Choose products made from recycled materials to support the recycling industry.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/yard waste for compost.jpg" alt="Garden Waste Composting">
                        <div class="card-content">
                            <h3>Garden Waste Composting</h3>
                            <p>Turn fallen leaves and grass clippings into compost instead of bagging them for trash collection.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/switch to reusable containers.jpg" alt="Switch to Reusable Containers">
                        <div class="card-content">
                            <h3>Switch to Reusable Containers</h3>
                            <p>Use reusable containers for storing food instead of disposable plastic wrap.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/donate household containers.jpg" alt="Donate, Don't Discard">
                        <div class="card-content">
                            <h3>Donate, Don't Discard</h3>
                            <p>Donate gently used furniture or household items instead of throwing them away.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/carry reusable straw.jpg" alt="Carry a Reusable Straw">
                        <div class="card-content">
                            <h3>Carry a Reusable Straw</h3>
                            <p>Bring your own reusable straw to avoid single-use plastic straws.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/multi layer packaging.jpg" alt="Smart Shopping Choices">
                        <div class="card-content">
                            <h3>Smart Shopping Choices</h3>
                            <p>Avoid buying items packaged in multi-layered plastics that are hard to recycle.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/learn local recycling rules.jpg" alt="Learn Local Recycling Rules">
                        <div class="card-content">
                            <h3>Learn Local Recycling Rules</h3>
                            <p>Learn your local recycling rules to ensure you're recycling correctly</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/start seeds in recycled containers.jpg" alt="Start Seeds in Recycled Containers">
                        <div class="card-content">
                            <h3>Start Seeds in Recycled Containers</h3>
                            <p>Turn egg cartons and cardboard boxes into seed starters for gardening.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <!-- Duplicate cards for seamless scrolling -->
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/sorting.jpg" alt="Sort Your Recyclables">
                        <div class="card-content">
                            <h3>Sort Your Recyclables</h3>
                            <p>Separate recyclable materials into categories like paper, plastic, and glass for efficient recycling.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/compost food scraps.jpg" alt="Compost Food Scraps">
                        <div class="card-content">
                            <h3>Compost Food Scraps</h3>
                            <p>Compost food scraps like vegetable peels and coffee grounds to reduce landfill waste.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/clean your recycleables.jpg" alt="Clean Your Recyclables">
                        <div class="card-content">
                            <h3>Clean Your Recyclables</h3>
                            <p>Clean recyclables like bottles and jars before placing them in the recycling bin to prevent contamination.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/use beeswax wrap.jpg" alt="Use Beeswax Wraps">
                        <div class="card-content">
                            <h3>Use Beeswax Wraps</h3>
                            <p>Switch to reusable beeswax wraps instead of plastic wrap for food storage.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/recycle old documents.jpg" alt="Recycle Old Documents">
                        <div class="card-content">
                            <h3>Recycle Old Documents</h3>
                            <p>Shred and recycle old documents instead of discarding them in the trash.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/choose recycled products.jpg" alt="Choose Recycled Products">
                        <div class="card-content">
                            <h3>Choose Recycled Products</h3>
                            <p>Choose products made from recycled materials to support the recycling industry.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/yard waste for compost.jpg" alt="Garden Waste Composting">
                        <div class="card-content">
                            <h3>Garden Waste Composting</h3>
                            <p>Turn fallen leaves and grass clippings into compost instead of bagging them for trash collection.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/switch to reusable containers.jpg" alt="Switch to Reusable Containers">
                        <div class="card-content">
                            <h3>Switch to Reusable Containers</h3>
                            <p>Use reusable containers for storing food instead of disposable plastic wrap.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/donate household containers.jpg" alt="Donate, Don't Discard">
                        <div class="card-content">
                            <h3>Donate, Don't Discard</h3>
                            <p>Donate gently used furniture or household items instead of throwing them away.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/carry reusable straw.jpg" alt="Carry a Reusable Straw">
                        <div class="card-content">
                            <h3>Carry a Reusable Straw</h3>
                            <p>Bring your own reusable straw to avoid single-use plastic straws.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/multi layer packaging.jpg" alt="Smart Shopping Choices">
                        <div class="card-content">
                            <h3>Smart Shopping Choices</h3>
                            <p>Avoid buying items packaged in multi-layered plastics that are hard to recycle.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/learn local recycling rules.jpg" alt="Learn Local Recycling Rules">
                        <div class="card-content">
                            <h3>Learn Local Recycling Rules</h3>
                            <p>Learn your local recycling rules to ensure you're recycling correctly</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                    <div class="tip-card">
                        <img class="card-image" src="assets/card images/start seeds in recycled containers.jpg" alt="Start Seeds in Recycled Containers">
                        <div class="card-content">
                            <h3>Start Seeds in Recycled Containers</h3>
                            <p>Turn egg cartons and cardboard boxes into seed starters for gardening.</p>
                            <a href="#" class="see-more">See more</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="locations-section" id="map-section">
            <h2>Want to bring change but don't know where to begin?</h2>
            <div class="map-container">
                <div class="buttons-container">
                    <h3>Locate places where you can begin the change</h3>
                    <div class="search-controls">
                        <label for="radiusSlider">Search Radius (km):</label>
                        <input type="range" id="radiusSlider" min="1" max="50" value="10" step="1">
                        <span id="radiusValue">10 km</span>
                    </div>
                    <button id="findRecyclingBtn">
                        <span class="button-text">Find Recycling Centers</span>
                        <span class="loading-spinner"></span>
                    </button>
                    <button id="findCompostingBtn">
                        <span class="button-text">Find Composting Centers</span>
                        <span class="loading-spinner"></span>
                    </button>
                    <div class="location-status"></div>
                    <div class="results-summary"></div>
                    <div class="results-list"></div>
                </div>
                <div id="map"></div>
            </div>
        </section>

        <section class="leaderboard-section">
            <div class="leaderboard-header">
                <h2>Top Contributors</h2>
                <p>Making a difference in our community</p>
            </div>
            <div class="leaderboard-container">
                <div class="leaderboard-card top-contributor">
                    <div class="rank">1</div>
                    <img src="assets/default-profile.png" alt="Top Contributor" class="contributor-image">
                    <div class="contributor-info">
                        <h3>Sarah Johnson</h3>
                        <p>1,250 Points</p>
                        <div class="contribution-stats">
                            <span><i class="fas fa-recycle"></i> 85 Items</span>
                            <span><i class="fas fa-tree"></i> 12 Trees</span>
                        </div>
                    </div>
                    <div class="achievement-badge">
                        <i class="fas fa-crown"></i>
                    </div>
                </div>
                
                <div class="leaderboard-grid">
                    <div class="leaderboard-card">
                        <div class="rank">2</div>
                        <img src="assets/default-profile.png" alt="Contributor" class="contributor-image">
                        <div class="contributor-info">
                            <h3>Mike Chen</h3>
                            <p>980 Points</p>
                        </div>
                    </div>
                    
                    <div class="leaderboard-card">
                        <div class="rank">3</div>
                        <img src="assets/default-profile.png" alt="Contributor" class="contributor-image">
                        <div class="contributor-info">
                            <h3>Emma Davis</h3>
                            <p>850 Points</p>
                        </div>
                    </div>
                    
                    <div class="leaderboard-card">
                        <div class="rank">4</div>
                        <img src="assets/default-profile.png" alt="Contributor" class="contributor-image">
                        <div class="contributor-info">
                            <h3>Alex Kim</h3>
                            <p>720 Points</p>
                        </div>
                    </div>
                    
                    <div class="leaderboard-card">
                        <div class="rank">5</div>
                        <img src="assets/default-profile.png" alt="Contributor" class="contributor-image">
                        <div class="contributor-info">
                            <h3>Lisa Patel</h3>
                            <p>690 Points</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upload Modal -->
        <div class="modal" id="uploadModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Analyze Product</h2>
                    <button class="close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="upload-container">
                        <div class="upload-box" id="uploadBox">
                            <i class="fas fa-upload"></i>
                            <p>Drop your image here or click to upload</p>
                            <input type="file" id="fileInput" accept="image/*">
                        </div>
                    </div>
                    <div id="analysisResult" class="analysis-result" style="display: none;">
                        <h3>Analysis Results</h3>
                        <div class="result-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Events Modal -->
        <div class="modal" id="calendarModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Upcoming Recycling Events</h2>
                <div id="events-list"></div>
            </div>
        </div>

        <script src="config.js"></script>
        <script>
            let map;
            let markers = [];
            let currentRadius = 10000; // 10km in meters
            let currentSearch = null;
            
            // Function to clear existing markers
            function clearMarkers() {
                markers.forEach(marker => marker.setMap(null));
                markers = [];
            }

            // Function to perform nearby search
            function searchNearbyPlaces(type) {
                if (!map) return;
                
                // Show loading spinner on the appropriate button
                const recyclingBtn = document.getElementById('findRecyclingBtn');
                const compostingBtn = document.getElementById('findCompostingBtn');
                
                if (type === 'recycling center') {
                    recyclingBtn.classList.add('loading');
                    recyclingBtn.disabled = true;
                } else if (type === 'composting center') {
                    compostingBtn.classList.add('loading');
                    compostingBtn.disabled = true;
                }
                
                clearMarkers();
                currentSearch = type;
                
                const center = map.getCenter();
                const request = {
                    location: center,
                    radius: currentRadius,
                    keyword: type
                };

                const service = new google.maps.places.PlacesService(map);
                service.nearbySearch(request, (results, status) => {
                    // Remove loading state from buttons
                    recyclingBtn.classList.remove('loading');
                    recyclingBtn.disabled = false;
                    compostingBtn.classList.remove('loading');
                    compostingBtn.disabled = false;
                    
                    if (status === google.maps.places.PlacesServiceStatus.OK && results) {
                        // Update results summary
                        const resultsSummary = document.querySelector('.results-summary');
                        resultsSummary.textContent = `Found ${results.length} ${type} locations within ${currentRadius/1000}km`;
                        
                        // Clear previous results
                        const resultsList = document.querySelector('.results-list');
                        resultsList.innerHTML = '';
                        
                        results.forEach(place => {
                            const marker = new google.maps.Marker({
                                map: map,
                                position: place.geometry.location,
                                title: place.name
                            });

                            const infowindow = new google.maps.InfoWindow({
                                content: `
                                    <div>
                                        <h3>${place.name}</h3>
                                        <p>${place.vicinity}</p>
                                        ${place.rating ? `<p>Rating: ${place.rating} ⭐</p>` : ''}
                                    </div>
                                `
                            });

                            marker.addListener('click', () => {
                                infowindow.open(map, marker);
                            });

                            markers.push(marker);
                            
                            // Add to results list
                            const resultItem = document.createElement('div');
                            resultItem.className = 'result-item';
                            resultItem.innerHTML = `
                                <h4>${place.name}</h4>
                                <p>${place.vicinity}</p>
                                ${place.rating ? `<p>Rating: ${place.rating} ⭐</p>` : ''}
                            `;
                            resultItem.addEventListener('click', () => {
                                map.setCenter(place.geometry.location);
                                map.setZoom(15);
                                infowindow.open(map, marker);
                            });
                            resultsList.appendChild(resultItem);
                        });
                    } else {
                        // Show error message
                        const resultsSummary = document.querySelector('.results-summary');
                        resultsSummary.textContent = `No ${type} locations found within ${currentRadius/1000}km`;
                        
                        // Clear previous results
                        const resultsList = document.querySelector('.results-list');
                        resultsList.innerHTML = '';
                    }
                });
            }

            // Initialize map
            window.initMap = function() {
                // Try to get user's location
                if (navigator.geolocation) {
                    // Show location status
                    const locationStatus = document.querySelector('.location-status');
                    locationStatus.textContent = 'Getting your location...';
                    
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const userLocation = {
                                lat: position.coords.latitude,
                                lng: position.coords.longitude
                            };
                            locationStatus.textContent = 'Location found! Initializing map...';
                            initializeMapWithLocation(userLocation);
                        },
                        (error) => {
                            // Handle geolocation error
                            console.error('Geolocation error:', error);
                            locationStatus.textContent = 'Could not get your location. Using default location.';
                            // Default to a central location if geolocation fails
                            initializeMapWithLocation({ lat: 20.5937, lng: 78.9629 });
                        },
                        {
                            enableHighAccuracy: true,
                            timeout: 5000,
                            maximumAge: 0
                        }
                    );
                } else {
                    const locationStatus = document.querySelector('.location-status');
                    locationStatus.textContent = 'Geolocation is not supported by your browser. Using default location.';
                    // Default to a central location if geolocation not supported
                    initializeMapWithLocation({ lat: 20.5937, lng: 78.9629 });
                }
            };

            function initializeMapWithLocation(location) {
                const mapOptions = {
                    center: location,
                    zoom: 13,
                    mapTypeControl: true,
                    mapTypeControlOptions: {
                        position: google.maps.ControlPosition.TOP_RIGHT
                    },
                    fullscreenControl: true,
                    streetViewControl: true,
                    zoomControl: true,
                    zoomControlOptions: {
                        position: google.maps.ControlPosition.RIGHT_CENTER
                    }
                };

                map = new google.maps.Map(document.getElementById('map'), mapOptions);

                // Add user's location marker with custom icon
                new google.maps.Marker({
                    position: location,
                    map: map,
                    title: 'Your Location',
                    icon: {
                        url: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'
                    }
                });

                // Set up radius circle
                const radiusCircle = new google.maps.Circle({
                    map: map,
                    center: location,
                    radius: currentRadius,
                    fillColor: '#4CAF50',
                    fillOpacity: 0.1,
                    strokeColor: '#4CAF50',
                    strokeOpacity: 0.8,
                    strokeWeight: 2
                });

                // Set up click listeners for the buttons
                const findRecyclingBtn = document.getElementById('findRecyclingBtn');
                const findCompostingBtn = document.getElementById('findCompostingBtn');
                
                if (findRecyclingBtn) {
                    findRecyclingBtn.addEventListener('click', () => {
                        searchNearbyPlaces('recycling center');
                    });
                }

                if (findCompostingBtn) {
                    findCompostingBtn.addEventListener('click', () => {
                        searchNearbyPlaces('composting center');
                    });
                }

                // Set up radius slider
                const radiusSlider = document.getElementById('radiusSlider');
                const radiusValue = document.getElementById('radiusValue');
                
                if (radiusSlider && radiusValue) {
                    // Set initial value
                    radiusSlider.value = currentRadius / 1000;
                    radiusValue.textContent = `${currentRadius / 1000} km`;
                    
                    radiusSlider.addEventListener('input', (e) => {
                        const newRadius = e.target.value * 1000;
                        currentRadius = newRadius;
                        radiusValue.textContent = `${e.target.value} km`;
                        
                        // Update circle radius
                        radiusCircle.setRadius(newRadius);
                        
                        // Refresh search if there's an active search
                        if (currentSearch) {
                            searchNearbyPlaces(currentSearch);
                        }
                    });
                }

                // Show initial status
                const locationStatus = document.querySelector('.location-status');
                locationStatus.textContent = 'Map initialized! You can now search for recycling and composting centers.';
            }

            // Load Google Maps script
            function loadGoogleMapsScript() {
                const script = document.createElement('script');
                script.src = `https://maps.googleapis.com/maps/api/js?key=${window.appConfig.GOOGLE_MAPS_API_KEY}&libraries=places&callback=initMap`;
                script.async = true;
                script.defer = true;
                document.head.appendChild(script);
            }

            // Initialize when the page loads
            window.addEventListener('load', loadGoogleMapsScript);
        </script>
        <script src="script.js"></script>
    </body>
</html>
