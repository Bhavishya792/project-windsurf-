<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoRise - Sustainable Living</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Distressed&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav>
        <div class="nav-left">
            <img src="assets/logo.png" alt="EcoRise Logo" class="logo">
            <span class="brand-name">EcoRise</span>
        </div>
        <div class="nav-middle">
            <a href="index.html" class="active">Home</a>
            <a href="fiy.html">FIY</a>
            <a href="#">Volunteer</a>
            <a href="#">Guide</a>
            <a href="#" class="accessibility-link">Accessibility Info</a>
        </div>
        <div class="nav-right">
            <button class="icon-btn" id="calendarBtn">
                <i class="fas fa-calendar"></i>
            </button>
            <button class="icon-btn" id="notificationBtn">
                <i class="fas fa-bell"></i>
            </button>
            <button class="profile-btn">
                <img src="assets/default-profile.png" alt="Profile" class="profile-pic">
            </button>
        </div>
    </nav>

    <main>
        <section class="hero">
            <div class="hero-content">
                <h1>Take care of nature</h1>
                <div class="hero-subtext">
                    <h2>Join the Green Revolution</h2>
                    <p>Every small action counts towards a sustainable future</p>
                </div>
            </div>
        </section>

        <button class="floating-camera-btn" id="cameraBtn">
            <i class="fas fa-camera"></i>
        </button>

        <section class="tips-section">
            <h2>We are Creating sustainable society, for everyone and forever.</h2>
            <div class="tips-container">
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/images/sorting.jpg')"></div>
                    <h3>Sort Your Recyclables</h3>
                    <p>Separate recyclable materials into categories like paper, plastic, and glass for efficient recycling.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/compost food scraps.jpg')"></div>
                    <h3>Compost Food Scraps</h3>
                    <p>Compost food scraps like vegetable peels and coffee grounds to reduce landfill waste.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/clean your recycleables.jpg')"></div>
                    <h3>Clean Your Recyclables</h3>
                    <p>Clean recyclables like bottles and jars before placing them in the recycling bin to prevent contamination.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/recycle old documents.jpg')"></div>
                    <h3>Recycle Old Documents</h3>
                    <p>Shred and recycle old documents instead of discarding them in the trash.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/choose recycled products.jpg')"></div>
                    <h3>Choose Recycled Products</h3>
                    <p>Choose products made from recycled materials to support the recycling industry.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/yard waste for compost.jpg')"></div>
                    <h3>Garden Waste Composting</h3>
                    <p>Turn fallen leaves and grass clippings into compost instead of bagging them for trash collection.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/switch to reusable containers.jpg')"></div>
                    <h3>Switch to Reusable Containers</h3>
                    <p>Use reusable containers for storing food instead of disposable plastic wrap.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/donate household containers.jpg')"></div>
                    <h3>Donate, Don't Discard</h3>
                    <p>Donate gently used furniture or household items instead of throwing them away.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/carry reusable straw.jpg')"></div>
                    <h3>Carry a Reusable Straw</h3>
                    <p>Bring your own reusable straw to avoid single-use plastic straws.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/multi layer packaging.jpg')"></div>
                    <h3>Smart Shopping Choices</h3>
                    <p>Avoid buying items packaged in multi-layered plastics that are hard to recycle.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/learn local recycling rules.jpg')"></div>
                    <h3>Learn Local Recycling Rules</h3>
                    <p>Learn your local recycling rules to ensure you're recycling correctly</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/start seeds in recycled containers.jpg')"></div>
                    <h3>Start Seeds in Recycled Containers</h3>
                    <p>Turn egg cartons and cardboard boxes into seed starters for gardening.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
                <div class="tip-card">
                    <div class="card-image" style="background-image: url('assets/card images/use beeswax wrap.jpg')"></div>
                    <h3>Use Beeswax Wraps</h3>
                    <p>Swap plastic wrap for beeswax wraps to keep food fresh.</p>
                    <a href="#" class="see-more">See more</a>
                </div>
            </div>

            </div>
        </section>

        <section class="locations-section">
            <h2>Want to bring change but don't know where to begin?</h2>
            <div class="map-container">
                <div class="buttons-container">
                    <h3>Locate places where you can begin the change</h3>
                    <div class="search-controls">
                        <label for="radiusSlider">Search Radius (km):</label>
                        <input type="range" id="radiusSlider" min="1" max="50" value="10" step="1">
                        <span id="radiusValue">10 km</span>
                    </div>
                    <button id="findRecyclingBtn">
                        <span class="button-text">Find Recycling Centers</span>
                        <span class="loading-spinner"></span>
                    </button>
                    <button id="findCompostingBtn">
                        <span class="button-text">Find Composting Centers</span>
                        <span class="loading-spinner"></span>
                    </button>
                    <div class="location-status"></div>
                    <div class="results-summary"></div>
                    <div class="results-list"></div>
                </div>
                <div id="map"></div>
            </div>
        </section>

        <section class="leaderboard-section">
            <h2>Community Leaderboard</h2>
            <div class="leaderboard-container">
                <div class="leaderboard-header">
                    <span>Rank</span>
                    <span>User</span>
                    <span>Points</span>
                </div>
                <div class="leaderboard-body">
                    <div class="leaderboard-entry">
                        <span class="rank">1</span>
                        <div class="user-info">
                            <img src="assets/default-profile.png" alt="User">
                            <span>EcoWarrior</span>
                        </div>
                        <span class="points">2,450</span>
                    </div>
                    <div class="leaderboard-entry">
                        <span class="rank">2</span>
                        <div class="user-info">
                            <img src="assets/default-profile.png" alt="User">
                            <span>GreenGuardian</span>
                        </div>
                        <span class="points">2,180</span>
                    </div>
                    <div class="leaderboard-entry">
                        <span class="rank">3</span>
                        <div class="user-info">
                            <img src="assets/default-profile.png" alt="User">
                            <span>RecyclePro</span>
                        </div>
                        <span class="points">1,955</span>
                    </div>
                    <div class="leaderboard-entry">
                        <span class="rank">4</span>
                        <div class="user-info">
                            <img src="assets/default-profile.png" alt="User">
                            <span>EarthDefender</span>
                        </div>
                        <span class="points">1,820</span>
                    </div>
                    <div class="leaderboard-entry">
                        <span class="rank">5</span>
                        <div class="user-info">
                            <img src="assets/default-profile.png" alt="User">
                            <span>ZeroWaster</span>
                        </div>
                        <span class="points">1,690</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Analyze Product</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-container">
                    <div class="upload-box" id="uploadBox">
                        <i class="fas fa-upload"></i>
                        <p>Drop your image here or click to upload</p>
                        <input type="file" id="fileInput" accept="image/*">
                    </div>
                </div>
                <div id="analysisResult" class="analysis-result" style="display: none;">
                    <h3>Analysis Results</h3>
                    <div class="result-content"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Events Modal -->
    <div class="modal" id="calendarModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Upcoming Recycling Events</h2>
            <div id="events-list"></div>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        let map;
        let markers = [];
        let currentRadius = 10000; // Default 10km radius
        let currentSearch = '';

        // Function to clear existing markers
        function clearMarkers() {
            markers.forEach(marker => marker.setMap(null));
            markers = [];
        }

        // Function to perform nearby search
        function searchNearbyPlaces(type) {
            if (!map) return;
            
            clearMarkers();
            currentSearch = type;
            
            const center = map.getCenter();
            const request = {
                location: center,
                radius: currentRadius,
                keyword: type
            };

            const service = new google.maps.places.PlacesService(map);
            service.nearbySearch(request, (results, status) => {
                if (status === google.maps.places.PlacesServiceStatus.OK) {
                    results.forEach(place => {
                        const marker = new google.maps.Marker({
                            map: map,
                            position: place.geometry.location,
                            title: place.name
                        });

                        const infowindow = new google.maps.InfoWindow({
                            content: `
                                <div>
                                    <h3>${place.name}</h3>
                                    <p>${place.vicinity}</p>
                                    ${place.rating ? `<p>Rating: ${place.rating} ‚≠ê</p>` : ''}
                                </div>
                            `
                        });

                        marker.addListener('click', () => {
                            infowindow.open(map, marker);
                        });

                        markers.push(marker);
                    });
                }
            });
        }

        // Initialize map
        window.initMap = function() {
            // Try to get user's location
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        initializeMapWithLocation(userLocation);
                    },
                    () => {
                        // Default to a central location if geolocation fails
                        initializeMapWithLocation({ lat: 20.5937, lng: 78.9629 });
                    }
                );
            } else {
                // Default to a central location if geolocation not supported
                initializeMapWithLocation({ lat: 20.5937, lng: 78.9629 });
            }
        };

        function initializeMapWithLocation(location) {
            map = new google.maps.Map(document.getElementById('map'), {
                center: location,
                zoom: 13, // Adjusted zoom level for 10km radius
                mapTypeId: 'satellite',
                mapTypeControl: true,
                mapTypeControlOptions: {
                    position: google.maps.ControlPosition.TOP_RIGHT
                }
            });

            // Add user's location marker
            new google.maps.Marker({
                position: location,
                map: map,
                title: 'Your Location',
                icon: {
                    url: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'
                }
            });

            // Set up click listeners for the buttons
            document.getElementById('findRecyclingBtn').addEventListener('click', () => {
                searchNearbyPlaces('recycling center');
            });

            document.getElementById('findCompostingBtn').addEventListener('click', () => {
                searchNearbyPlaces('composting center');
            });

            // Set up radius slider with default 10km
            const radiusSlider = document.getElementById('radiusSlider');
            const radiusValue = document.getElementById('radiusValue');
            
            // Set initial value to 10km
            radiusSlider.value = 10;
            radiusValue.textContent = '10 km';
            
            radiusSlider.addEventListener('input', (e) => {
                currentRadius = e.target.value * 1000; // Convert km to meters
                radiusValue.textContent = `${e.target.value} km`;
                
                // Refresh search if there's an active search
                if (currentSearch) {
                    searchNearbyPlaces(currentSearch);
                }
            });

            // Automatically search for recycling centers on load
            searchNearbyPlaces('recycling center');
        }

        // Load Google Maps script
        function loadGoogleMapsScript() {
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${window.appConfig.GOOGLE_MAPS_API_KEY}&libraries=places&v=weekly&callback=initMap`;
            script.async = true;
            script.defer = true;
            document.body.appendChild(script);
        }
        window.onload = loadGoogleMapsScript;
    </script>
    <script src="script.js"></script>
</body>
</html>
